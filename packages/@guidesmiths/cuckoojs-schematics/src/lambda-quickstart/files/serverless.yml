service: <%= serviceName %>

frameworkVersion: '3'

custom:
  localstack:
    stages:
      - local
  prune:
    automatic: true
    number: 3

provider:
  name: aws
  runtime: nodejs16.x
  stage: ${opt:stage, 'dev'}
  region: eu-west-1
  memorySize: 256
#  apiGateway:
#    restApiId: xxxxxxxxxx # REST API resource ID. Default is generated by the framework
#    restApiRootResourceId: xxxxxxxxxx # Root resource, represent as / path
  environment:
    SERVICE_NAME: ${env:SERVICE_NAME}

  httpApi:
    cors: true
    payload: '1.0'

functions:
  sayHello:
    handler: src/handlers/greetings.sayHello
    events:
      - httpApi:
          method: POST
          path: /v1/greetings/hello
#      - sns: arn:xxx
  sayBye:
    handler: src/handlers/greetings.sayBye
    events:
      - httpApi:
          method: POST
          path: /v1/greetings/bye
#      - sns: arn:xxx

plugins:
  - serverless-localstack
  - serverless-prune-plugin

useDotenv: true
